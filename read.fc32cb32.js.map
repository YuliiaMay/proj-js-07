{"mappings":"ssBAAA,IAAAA,EAAAC,EAAA,S,aAQsB,IAAI,E,WAAAC,SAA1B,MAGaC,EAAgB,YACvBC,EAAUC,SAASC,cAAc,kBAGvC,IAAIC,EAAW,KAgCXH,GACAA,EAAQI,iBAAiB,SAG7BC,eAA+BC,GAC3B,GAA0B,MAAtBA,EAAEC,OAAOC,SACT,OAGJ,MAAMC,GAAmB,EAAAC,EAAAC,yBAAwBZ,GAG3Ca,EAASN,EAAEC,OAAOM,QAAQ,SAASC,QAAQC,GAG3CC,QApCVX,iBACI,IAAIY,KAAEA,SAAerB,EAAAE,QAAMoB,IAJN,sGAOrB,OAAOD,C,CAgCkBE,GACzBhB,EAAWa,EAAWI,QACtBC,QAAQC,IAAInB,GAEZ,MACMoB,GADO,IAAIC,MACQC,iBAAiBC,MAAM,EAAG,IAK7CC,EAAkBxB,EAASyB,MAAK,EAACb,GAAEA,KAASc,OAAOd,KAAQc,OAAOjB,KACxEe,EAAgBG,IAAMP,EACtBF,QAAQC,IAAIK,QAEYI,IAApBJ,GACIlB,EAAiBuB,OAAMC,GAAmBJ,OAAOjB,KAAYiB,OAAOI,EAAgBlB,QACpFN,EAAiByB,KAAKP,IACtB,EAAAjB,EAAAyB,uBAAsBpC,EAAeU,G,uFC/EjD,IAAA2B,EAAAvC,EAAA,S,aAEe,MAAMwC,EASnBhC,mBACE,MAAMiC,EAAa,GAAGC,KAAKC,gCAAgCD,KAAKE,iBAAiBF,KAAKG,SACtF,aAAa9C,EAAAE,QAAMoB,IAAIoB,GAAYK,MAAKC,IACtC,GAAwB,MAApBA,EAASC,QAAyD,IAAvCD,EAAS3B,KAAK2B,SAASE,KAAKC,OACzD,MAAM,IAAIC,MAAMJ,EAASC,QAG3B,OAAOD,EAAS3B,IAAI,G,CAZxBgC,YAAYR,GAHZS,EAAAd,EAAA,CAAAG,KAAA,UAAU,yCACVW,EAAAd,EAAA,CAAAG,KAAA,SAAS,oCAGPA,KAAKE,MAAQA,EACbF,KAAKY,KAAO,C,wCCPhBC,OAAOC,eAAeC,EAAAC,QAAS,aAAc,CACzCC,OAAO,IAEXF,EAAAC,QAAQzD,QACR,SAAyB2D,EAAKC,EAAKF,GAC3BE,KAAOD,EACPL,OAAOC,eAAeI,EAAKC,EAAK,CAC5BF,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAGdJ,EAAIC,GAAOF,EAEf,OAAOC,C","sources":["src/js/storage/add-to-read.js","src/js/news-service.js","node_modules/@swc/helpers/lib/_define_property.js"],"sourcesContent":["import axios from 'axios';\nimport { getDataFromLocalStorage, setDataToLocalStorage } from '../api/service';\n// import { FILTERED_NEWS_URL } from '../main/filter-category'\n// import { filterCategories } from \"../main/filter-category\";\nimport SearchNewsApi from '../news-service';\n// import { fetchPopularNews } from '../storage/add-to-favorite'\n\n\nconst searchNewsApi = new SearchNewsApi();\n\n\nexport const READ_NEWS_KEY = 'read-news';\nconst gallery = document.querySelector('.news__gallery');\n\n// const uniqReadCardsArr = [];\nlet readData = null;\nlet readFiltredData = null;\nlet readFoundData = null;\n\n\n// console.log(FILTERED_NEWS_URL);\n\n// const FILTERED_NEWS_URL = `https://api.nytimes.com/svc/news/v3/content/section-list.json?api-key=ctrAXxxlZTZKIuOVxETyJyELWuuMaa5A`;\nconst POPULAR_NEWS_URL = `https://api.nytimes.com/svc/mostpopular/v2/emailed/7.json?api-key=ctrAXxxlZTZKIuOVxETyJyELWuuMaa5A`;\n\n\nasync function getPopularNews() {\n    let { data } = await axios.get(POPULAR_NEWS_URL);\n    // let popularRes = data.data.results;\n    \n    return data;\n}\n\nasync function getFilteredNews() {\n    let { data } = await axios.get(FILTERED_NEWS_URL);\n    return data;\n}\n\nasync function getFoundNews() {\n    let data = await axios.get(FILTERED_NEWS_URL);\n    console.log(data);\n    return data;\n}\n\n\n\n// перевірка чи клік у межах галереї статтей   \nif (gallery) {\n    gallery.addEventListener('click', onReadMoreClick);\n}\n    \nasync function onReadMoreClick(e) {\n    if (e.target.nodeName !== 'A') {\n        return;\n    }\n\n    const uniqReadCardsArr = getDataFromLocalStorage(READ_NEWS_KEY);\n\n\n    const cardId = e.target.closest('.card').dataset.id;\n    \n    // popular news ----------------------------\n    const popularRes = await getPopularNews();\n    readData = popularRes.results;\n    console.log(readData);\n\n    const date = new Date();\n    const currentDate = date.toLocaleString().slice(0, 10);\n    // const btnReadMore = e.target;\n    // btnReadMore.setAttribute('data-read', currentDate);\n\n\n    const uniqPopReadCard = readData.find(({ id }) => Number(id) === Number(cardId));\n    uniqPopReadCard.day = currentDate;\n    console.log(uniqPopReadCard);\n\n    if (uniqPopReadCard !== undefined) {\n        if (uniqReadCardsArr.every(uniqPopReadCard => Number(cardId) !== Number(uniqPopReadCard.id))) {\n            uniqReadCardsArr.push(uniqPopReadCard);\n            setDataToLocalStorage(READ_NEWS_KEY, uniqReadCardsArr);\n        }\n    }\n    \n\n    // filtered news ----------------------------\n    // const filteredRes = await filterCategories();\n    // // const filteredRes = await getFilteredNews();\n    \n    // readFiltredData = filteredRes;\n    // console.log(filteredRes);\n    \n\n    // const uniqFiltrReadCard = readFiltredData.find(({ id }) => Number(id) === Number(cardId));\n    // console.log(Number(cardId));\n    // if (uniqFiltrReadCard !== undefined) {\n    //     if (uniqReadCardsArr.every(readFiltredData => Number(cardId) !== Number(readFiltredData.id))) {\n    //         uniqReadCardsArr.push(readFiltredData);\n    //         setDataToLocalStorage(READ_NEWS_KEY, uniqReadCardsArr);\n    //     }\n    // }\n    \n\n    \n    // news by search request ----------------------------\n    // const searchQueryRes = await getFoundNews();\n    // const searchQueryRes = searchNewsApi.searchNews()\n    //     .then(articles => articles.response)\n    \n    // console.log(searchQueryRes);\n    // readFoundData\n\n    \n\n\n    \n\n\n    \n\n    \n}\n\n\n\n\n\n\n\n// 000000000000000000000000000000000000000\n// async function getFilteredNews() {\n//     let { data } = await axios.get(FILTERED_NEWS_URL);\n//     console.log(data);\n//     return data;\n// }\n\n// async function getFoundNews() {\n//     let { data } = await axios.get(POPULAR_NEWS_URL);\n//     console.log(data);\n//     return data;\n// }\n\n\n\n\n// export const FILTERED_NEWS_URL = `${baseUrlV3}${categoryUrl}?api-key=${key}`;","import axios from 'axios';\n\nexport default class SearchNewsApi {\n  baseUrl = 'https://api.nytimes.com/svc/search/v2';\n  apiKey = '1CftshpIbKCwUhOxVLAbMSPcGc2N2XMQ';\n\n  constructor(query) {\n    this.query = query;\n    this.page = 0;\n  }\n\n  async searchNews() {\n    const requestUrl = `${this.baseUrl}/articlesearch.json?q=${this.query}&api-key=${this.apiKey}`;\n    return await axios.get(requestUrl).then(response => {\n      if (response.status !== 200 || response.data.response.docs.length === 0) {\n        throw new Error(response.status);\n      }\n\n      return response.data;\n    });\n  }\n}\n\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n"],"names":["$2shzp","parcelRequire","default","$8b67851d3391c18a$export$3c2bf4ae9eb63dc1","$8b67851d3391c18a$var$gallery","document","querySelector","$8b67851d3391c18a$var$readData","addEventListener","async","e","target","nodeName","uniqReadCardsArr","$lO70r","getDataFromLocalStorage","cardId","closest","dataset","id","popularRes","data","get","$8b67851d3391c18a$var$getPopularNews","results","console","log","currentDate","Date","toLocaleString","slice","uniqPopReadCard1","find","Number","day","undefined","every","uniqPopReadCard","push","setDataToLocalStorage","$iJYdK","$58f2b4ecc6251333$export$2e2bcd8739ae039","requestUrl","this","baseUrl","query","apiKey","then","response","status","docs","length","Error","constructor","$parcel$interopDefault","page","Object","defineProperty","module","exports","value","obj","key","enumerable","configurable","writable"],"version":3,"file":"read.fc32cb32.js.map"}