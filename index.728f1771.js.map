{"mappings":"mpBAAA,IAAAA,EAAAC,EAAA,S,aAKA,MAAMC,EAAYC,SAASC,cAAc,kBAIzCC,QAAQC,IAAIJ,GAURA,GAAWA,EAAUK,iBAAiB,QAASC,GAEnD,IAAIC,EAAe,KACZC,eAAeF,EAAmBG,GACvC,IACE,MAAMC,EAAMD,EAAEE,OAAOC,QAAQ,+BAC7B,IAAKF,EAAK,OAEVA,EAAIG,UAAUC,OAAO,eACrB,MAAMC,EAASL,EAAIE,QAAQ,SAASI,QAAQC,GAEtCC,GAAY,EAAAC,EAAAC,yBAAwB,QAEpCC,EAAYH,EAAUI,WAC1B,EAACL,GAAEA,KAASM,OAAON,KAAQM,OAAOR,KAIpC,GAFAZ,QAAQC,IAAI,aAAciB,GAEtBA,GAAY,EACdH,EAAUM,OAAOH,EAAW,OACvB,CACL,IAAKd,EAAc,CACjB,MAAMkB,QAAEA,SA7BhBjB,iBACE,IAAIkB,KAAEA,SAAe5B,EAAA6B,QAAMC,IAFJ,sGAIvB,OAAOF,C,CA0ByBG,GAC1BtB,EAAekB,C,CAEjB,MAAMK,EAAMvB,EAAawB,MAAK,EAACd,GAAEA,KAASM,OAAON,KAAQM,OAAOR,KAChEG,EAAUc,KAAKF,E,EAEjB,EAAAX,EAAAc,uBAAsB,OAAQf,E,CAC9B,MAAOgB,GACP/B,QAAQC,IAAI8B,EAAMC,Q","sources":["src/js/storage/add-to-favorite.js"],"sourcesContent":["import axios from 'axios';\nimport { getDataFromLocalStorage, setDataToLocalStorage } from '../api/service';\n\n// ===========================================//\n\nconst galleryEl = document.querySelector('.news__gallery');\n// const favoriteSection = document.querySelector('.favorite__section');\n// const favoriteList = document.querySelector('.favorite__container');\n// const errorCard = document.querySelector('.error');\nconsole.log(galleryEl);\n//////////////////////////////////////\nconst POPULAR_NEWS_URL = `https://api.nytimes.com/svc/mostpopular/v2/emailed/7.json?api-key=ctrAXxxlZTZKIuOVxETyJyELWuuMaa5A`;\nasync function fetchFavoriteNews() {\n  let { data } = await axios.get(POPULAR_NEWS_URL);\n\n  return data;\n}\n///////////////////////////////////\n\nif (galleryEl) galleryEl.addEventListener('click', onBtnFavoriteClick);\n\nlet dataFavorite = null;\nexport async function onBtnFavoriteClick(e) {\n  try {\n    const btn = e.target.closest('.item-news__add-to-favorite');\n    if (!btn) return;\n\n    btn.classList.toggle('hidden-span');\n    const idCard = btn.closest('.card').dataset.id;\n\n    const newsArray = getDataFromLocalStorage('news');\n\n    const indexElem = newsArray.findIndex(\n      ({ id }) => Number(id) === Number(idCard)\n    );\n    console.log('indexElem ', indexElem);\n\n    if (indexElem > -1) {\n      newsArray.splice(indexElem, 1);\n    } else {\n      if (!dataFavorite) {\n        const { results } = await fetchFavoriteNews();\n        dataFavorite = results;\n      }\n      const obj = dataFavorite.find(({ id }) => Number(id) === Number(idCard));\n      newsArray.push(obj);\n    }\n    setDataToLocalStorage('news', newsArray);\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n"],"names":["$2shzp","parcelRequire","$a22e6d20a00413c7$var$galleryEl","document","querySelector","console","log","addEventListener","$a22e6d20a00413c7$export$e725018d8d426bf0","$a22e6d20a00413c7$var$dataFavorite","async","e","btn","target","closest","classList","toggle","idCard","dataset","id","newsArray","$lO70r","getDataFromLocalStorage","indexElem","findIndex","Number","splice","results","data","default","get","$a22e6d20a00413c7$var$fetchFavoriteNews","obj","find","push","setDataToLocalStorage","error","message"],"version":3,"file":"index.728f1771.js.map"}