{"mappings":"gtBAAA,IAAAA,EAAAC,EAAA,S,uCAKMC,EAAYC,SAASC,cAAc,kBAEzCC,QAAQC,IAAIJ,GAEZ,IAAMK,EAAoB,qG,SACXC,I,OAAAC,EAAiBC,MAAAC,KAAAC,U,UAAjBH,I,OAAAA,EAAfI,EAAAb,EAAA,CAAAa,EAAAC,GAAAC,MAAA,SAAAC,I,IACQC,E,kFAAeC,EAAAC,QAAMC,IAAIb,G,cAA3BU,EAAMI,EAAAC,KAAJL,K,kBAECA,G,4CAHuBP,MAAAC,KAAAC,U,CAO5BV,GAAWA,EAAUqB,iBAAiB,QAASC,GAEnD,IAAIC,EAAe,K,SACGD,EAAmBE,G,OAAnBC,EAAkBjB,MAAAC,KAAAC,U,UAAlBe,I,OAAAA,EAAfd,EAAAb,EAAA,CAAAa,EAAAC,GAAAC,MAAA,SAAAC,EAAkCU,G,IAE/BE,EAIAC,EAEAC,EAEAC,EASMC,EAGJC,E,8EApBFL,EAAMF,EAAEQ,OAAOC,QAAQ,+BACrB,C,mDAERP,EAAIQ,UAAUC,OAAO,eACfR,EAASD,EAAIO,QAAQ,SAASG,QAAQC,GAEtCT,GAAY,EAAAU,EAAAC,yBAAwB,QAEpCV,EAAYD,EAAUY,WAC1B,SAAAC,G,IAAGJ,EAAEI,EAAFJ,G,OAASK,OAAOL,KAAQK,OAAOf,E,IAEpCxB,QAAQC,IAAI,aAAcyB,KAEtBA,GAAY,GAAE,C,gBAChBD,EAAUe,OAAOd,EAAW,G,2BAEvBN,EAAY,C,iCACWjB,I,QAApBwB,EAASX,EAAAC,KAAPU,QACRP,EAAeO,E,QAEXC,EAAMR,EAAaqB,MAAK,SAAAH,G,IAAGJ,EAAEI,EAAFJ,G,OAASK,OAAOL,KAAQK,OAAOf,E,IAChEC,EAAUiB,KAAKd,G,SAEjB,EAAAO,EAAAQ,uBAAsB,OAAQlB,G,kDAE9BzB,QAAQC,IAAIe,EAAA4B,GAAMC,S,0DA3BAvB,EAAkBjB,MAAAC,KAAAC,U","sources":["src/js/storage/add-to-favorite.js"],"sourcesContent":["import axios from 'axios';\nimport { getDataFromLocalStorage, setDataToLocalStorage } from '../api/service';\n\n// ===========================================//\n\nconst galleryEl = document.querySelector('.news__gallery');\n\nconsole.log(galleryEl);\n//////////////////////////////////////\nconst POPULAR_NEWS_URL = `https://api.nytimes.com/svc/mostpopular/v2/emailed/7.json?api-key=ctrAXxxlZTZKIuOVxETyJyELWuuMaa5A`;\nasync function fetchFavoriteNews() {\n  let { data } = await axios.get(POPULAR_NEWS_URL);\n\n  return data;\n}\n///////////////////////////////////\n\nif (galleryEl) galleryEl.addEventListener('click', onBtnFavoriteClick);\n\nlet dataFavorite = null;\nexport async function onBtnFavoriteClick(e) {\n  try {\n    const btn = e.target.closest('.item-news__add-to-favorite');\n    if (!btn) return;\n\n    btn.classList.toggle('hidden-span');\n    const idCard = btn.closest('.card').dataset.id;\n\n    const newsArray = getDataFromLocalStorage('news');\n\n    const indexElem = newsArray.findIndex(\n      ({ id }) => Number(id) === Number(idCard)\n    );\n    console.log('indexElem ', indexElem);\n\n    if (indexElem > -1) {\n      newsArray.splice(indexElem, 1);\n    } else {\n      if (!dataFavorite) {\n        const { results } = await fetchFavoriteNews();\n        dataFavorite = results;\n      }\n      const obj = dataFavorite.find(({ id }) => Number(id) === Number(idCard));\n      newsArray.push(obj);\n    }\n    setDataToLocalStorage('news', newsArray);\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$48703bb0de78984b$var$galleryEl","document","querySelector","console","log","$48703bb0de78984b$var$POPULAR_NEWS_URL","$48703bb0de78984b$var$fetchFavoriteNews","$48703bb0de78984b$var$_fetchFavoriteNews","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","data","$dIxxU","default","get","_ctx","sent","addEventListener","$48703bb0de78984b$export$e725018d8d426bf0","$48703bb0de78984b$var$dataFavorite","e","$48703bb0de78984b$var$_onBtnFavoriteClick","btn","idCard","newsArray","indexElem","results","obj","target","closest","classList","toggle","dataset","id","$1m3k3","getDataFromLocalStorage","findIndex","param","Number","splice","find","push","setDataToLocalStorage","t0","message"],"version":3,"file":"index.1759e676.js.map"}