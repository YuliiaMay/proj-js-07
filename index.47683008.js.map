{"mappings":"mpBAAA,IAAAA,EAAAC,EAAA,S,aAKA,MAAMC,EAAYC,SAASC,cAAc,kBAIlCC,eAAeC,EAAmBC,GACvC,IACE,MAAMC,EAAMD,EAAEE,OAAOC,QAAQ,+BAC7B,IAAKF,EAAK,OAEVA,EAAIG,UAAUC,OAAO,eAErB,MAAMC,EAASL,EAAIE,QAAQ,SAASI,QAAQC,GACtCC,GAAY,EAAAhB,EAAAiB,yBAAwB,QAMpCC,GAFe,EAAAC,EAAAC,WAEQC,MAC3B,EAACN,GAAEA,KAASO,OAAOP,KAAQO,OAAOT,KAQpC,GALIG,EAAUO,OAAMC,GAAQF,OAAOT,KAAYS,OAAOE,EAAKT,QACzDC,EAAUS,KAAKP,IACf,EAAAlB,EAAA0B,uBAAsB,OAAQV,KAG3BR,EAAIG,UAAUgB,SAAS,eAAgB,CAC1C,MAAMC,EAAUZ,EAAUK,MAAK,EAACN,GAAEA,KAASO,OAAOP,KAAQO,OAAOT,KAE3DgB,EAAcC,OAAOd,EAAUe,QAAQH,IAE7CZ,EAAUgB,OAAOH,EAAa,IAC9B,EAAA7B,EAAA0B,uBAAsB,OAAQV,E;;CAIhC,MAAOiB,GACPC,QAAQC,IAAIF,EAAMG,Q,EApClBlC,GAAWA,EAAUmC,iBAAiB,QAAS/B,E","sources":["src/js/storage/add-to-favorite.js"],"sourcesContent":["import { getDataFromLocalStorage, setDataToLocalStorage } from '../api/service';\nimport { getCard } from '../gallery';\n\n// ===========================================//\n\nconst galleryEl = document.querySelector('.news__gallery');\n\nif (galleryEl) galleryEl.addEventListener('click', onBtnFavoriteClick);\n\nexport async function onBtnFavoriteClick(e) {\n  try {\n    const btn = e.target.closest('.item-news__add-to-favorite');\n    if (!btn) return;\n\n    btn.classList.toggle('hidden-span');\n\n    const idCard = btn.closest('.card').dataset.id;\n    const newsArray = getDataFromLocalStorage('news');\n\n    //!===============================\n\n    const dataFavorite = getCard();\n\n    const oneCard = dataFavorite.find(\n      ({ id }) => String(id) === String(idCard)\n    );\n\n    if (newsArray.every(card => String(idCard) !== String(card.id))) {\n      newsArray.push(oneCard);\n      setDataToLocalStorage('news', newsArray);\n    }\n\n    if (!btn.classList.contains('hidden-span')) {\n      const element = newsArray.find(({ id }) => String(id) === String(idCard));\n\n      const indexForDel = Number(newsArray.indexOf(element));\n\n      newsArray.splice(indexForDel, 1);\n      setDataToLocalStorage('news', newsArray);\n    }\n\n    //!===============================\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n"],"names":["$lO70r","parcelRequire","$a22e6d20a00413c7$var$galleryEl","document","querySelector","async","$a22e6d20a00413c7$export$e725018d8d426bf0","e","btn","target","closest","classList","toggle","idCard","dataset","id","newsArray","getDataFromLocalStorage","oneCard","$aFV0K","getCard","find","String","every","card","push","setDataToLocalStorage","contains","element","indexForDel","Number","indexOf","splice","error","console","log","message","addEventListener"],"version":3,"file":"index.47683008.js.map"}