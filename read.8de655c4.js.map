{"mappings":"ktBAAA,IAAAA,EAAAC,EAAA,S,uCAWaC,GAHS,IAAI,E,WAAAC,SAGG,aACvBC,EAAUC,SAASC,cAAc,kBAGnCC,EAAW,KAQTC,EAAoB,qG,SAGXC,I,OAAAC,EAAcC,MAAAC,KAAAC,U,UAAdH,I,OAAAA,EAAfI,EAAAd,EAAA,CAAAc,EAAAC,GAAAC,MAAA,SAAAC,I,IACUC,E,kFAAeC,EAAAhB,QAAMiB,IAAIZ,G,cAA3BU,EAAMG,EAAAC,KAAJJ,K,kBAGCA,G,4CAJkBP,MAAAC,KAAAC,U,UAyBdU,I,OAAAA,EAAfT,EAAAd,EAAA,CAAAc,EAAAC,GAAAC,MAAA,SAAAC,EAA+BO,G,IAKrBC,EAGAC,EAGAC,EAIAC,EACAC,EAKAC,E,qEApBoB,MAAtBN,EAAEO,OAAOC,SAAgB,C,uDAIvBP,GAAmB,EAAAQ,EAAAC,yBAAwBhC,GAG3CwB,EAASF,EAAEO,OAAOI,QAAQ,SAASC,QAAQC,G,SAGxB5B,I,OAAnBkB,EAAUN,EAAAC,KAChBf,EAAWoB,EAAWW,QACtBC,QAAQC,IAAIjC,GAENqB,EAAO,IAAIa,KACXZ,EAAcD,EAAKc,iBAAiBC,MAAM,EAAG,KAK7Cb,EAAkBvB,EAASqC,MAAK,SAAAC,G,IAAGR,EAAEQ,EAAFR,G,OAASS,OAAOT,KAAQS,OAAOpB,E,KACxDqB,IAAMlB,EACtBU,QAAQC,IAAIV,QAEYkB,IAApBlB,GACIL,EAAiBwB,OAAM,SAAAC,G,OAAmBJ,OAAOpB,KAAYoB,OAAOI,EAAgBb,G,MACpFZ,EAAiB0B,KAAKrB,IACtB,EAAAG,EAAAmB,uBAAsBlD,EAAeuB,I,6CA5BnBd,MAAAC,KAAAC,U,CAJ1BT,GACAA,EAAQiD,iBAAiB,S,SAGE7B,G,OAAhBD,EAAeZ,MAAAC,KAAAC,U,uFCnD9B,IAAAb,EAAAC,EAAA,S,iEAEeqD,ECFd,W,sBDEoBC,EAIPC,G,aAHZ1C,EAAA2C,EAAA,CAAA7C,KAAA,UAAU,yCACVE,EAAA2C,EAAA,CAAA7C,KAAA,SAAS,oCAGPA,KAAK4C,MAAQA,EACb5C,KAAK8C,KAAO,C,iBAGRC,IAAA,a,MAAN,W,kBAAA7C,EAAAd,EAAA,CAAAc,EAAAC,GAAAC,MAAA,SAAAC,I,IACQ2C,E,yEAAAA,EAAa,GAAwCC,OAArCC,EAAKC,QAAQ,0BAA8CF,OAAtBC,EAAKN,MAAM,aAAuBK,OAAZC,EAAKE,Q,SACzE7C,EAAAhB,QAAMiB,IAAIwC,GAAYK,MAAK,SAAAC,GACtC,GAAwB,MAApBA,EAASC,QAAyD,IAAvCD,EAAShD,KAAKgD,SAASE,KAAKC,OACzD,MAAM,IAAIC,MAAMJ,EAASC,QAG3B,OAAOD,EAAShD,I,sFAPpB,E,OCXD,E,sCCAD,aACAqD,OAAOC,eAAeC,EAAAC,QAAS,aAAc,CACzCC,OAAO,IAEXF,EAAAC,QAAQvE,QACR,SAAyByE,EAAKjB,EAAKgB,GAC3BhB,KAAOiB,EACPL,OAAOC,eAAeI,EAAKjB,EAAK,CAC5BgB,MAAOA,EACPE,YAAY,EACZC,cAAc,EACdC,UAAU,IAGdH,EAAIjB,GAAOgB,EAEf,OAAOC,C","sources":["src/js/storage/add-to-read.js","src/js/news-service.js","<<jsx-config-pragma.js>>","node_modules/@swc/helpers/lib/_define_property.js"],"sourcesContent":["import axios from 'axios';\nimport { getDataFromLocalStorage, setDataToLocalStorage } from '../api/service';\n// import { FILTERED_NEWS_URL } from '../main/filter-category'\n// import { filterCategories } from \"../main/filter-category\";\nimport SearchNewsApi from '../news-service';\n// import { fetchPopularNews } from '../storage/add-to-favorite'\n\n\nconst searchNewsApi = new SearchNewsApi();\n\n\nexport const READ_NEWS_KEY = 'read-news';\nconst gallery = document.querySelector('.news__gallery');\n\n// const uniqReadCardsArr = [];\nlet readData = null;\nlet readFiltredData = null;\nlet readFoundData = null;\n\n\n// console.log(FILTERED_NEWS_URL);\n\n// const FILTERED_NEWS_URL = `https://api.nytimes.com/svc/news/v3/content/section-list.json?api-key=ctrAXxxlZTZKIuOVxETyJyELWuuMaa5A`;\nconst POPULAR_NEWS_URL = `https://api.nytimes.com/svc/mostpopular/v2/emailed/7.json?api-key=ctrAXxxlZTZKIuOVxETyJyELWuuMaa5A`;\n\n\nasync function getPopularNews() {\n    let { data } = await axios.get(POPULAR_NEWS_URL);\n    // let popularRes = data.data.results;\n    \n    return data;\n}\n\nasync function getFilteredNews() {\n    let { data } = await axios.get(FILTERED_NEWS_URL);\n    return data;\n}\n\nasync function getFoundNews() {\n    let data = await axios.get(FILTERED_NEWS_URL);\n    console.log(data);\n    return data;\n}\n\n\n\n// перевірка чи клік у межах галереї статтей   \nif (gallery) {\n    gallery.addEventListener('click', onReadMoreClick);\n}\n    \nasync function onReadMoreClick(e) {\n    if (e.target.nodeName !== 'A') {\n        return;\n    }\n\n    const uniqReadCardsArr = getDataFromLocalStorage(READ_NEWS_KEY);\n\n\n    const cardId = e.target.closest('.card').dataset.id;\n    \n    // popular news ----------------------------\n    const popularRes = await getPopularNews();\n    readData = popularRes.results;\n    console.log(readData);\n\n    const date = new Date();\n    const currentDate = date.toLocaleString().slice(0, 10);\n    // const btnReadMore = e.target;\n    // btnReadMore.setAttribute('data-read', currentDate);\n\n\n    const uniqPopReadCard = readData.find(({ id }) => Number(id) === Number(cardId));\n    uniqPopReadCard.day = currentDate;\n    console.log(uniqPopReadCard);\n\n    if (uniqPopReadCard !== undefined) {\n        if (uniqReadCardsArr.every(uniqPopReadCard => Number(cardId) !== Number(uniqPopReadCard.id))) {\n            uniqReadCardsArr.push(uniqPopReadCard);\n            setDataToLocalStorage(READ_NEWS_KEY, uniqReadCardsArr);\n        }\n    }\n    \n\n    // filtered news ----------------------------\n    // const filteredRes = await filterCategories();\n    // // const filteredRes = await getFilteredNews();\n    \n    // readFiltredData = filteredRes;\n    // console.log(filteredRes);\n    \n\n    // const uniqFiltrReadCard = readFiltredData.find(({ id }) => Number(id) === Number(cardId));\n    // console.log(Number(cardId));\n    // if (uniqFiltrReadCard !== undefined) {\n    //     if (uniqReadCardsArr.every(readFiltredData => Number(cardId) !== Number(readFiltredData.id))) {\n    //         uniqReadCardsArr.push(readFiltredData);\n    //         setDataToLocalStorage(READ_NEWS_KEY, uniqReadCardsArr);\n    //     }\n    // }\n    \n\n    \n    // news by search request ----------------------------\n    // const searchQueryRes = await getFoundNews();\n    // const searchQueryRes = searchNewsApi.searchNews()\n    //     .then(articles => articles.response)\n    \n    // console.log(searchQueryRes);\n    // readFoundData\n\n    \n\n\n    \n\n\n    \n\n    \n}\n\n\n\n\n\n\n\n// 000000000000000000000000000000000000000\n// async function getFilteredNews() {\n//     let { data } = await axios.get(FILTERED_NEWS_URL);\n//     console.log(data);\n//     return data;\n// }\n\n// async function getFoundNews() {\n//     let { data } = await axios.get(POPULAR_NEWS_URL);\n//     console.log(data);\n//     return data;\n// }\n\n\n\n\n// export const FILTERED_NEWS_URL = `${baseUrlV3}${categoryUrl}?api-key=${key}`;","import axios from 'axios';\n\nexport default class SearchNewsApi {\n  baseUrl = 'https://api.nytimes.com/svc/search/v2';\n  apiKey = '1CftshpIbKCwUhOxVLAbMSPcGc2N2XMQ';\n\n  constructor(query) {\n    this.query = query;\n    this.page = 0;\n  }\n\n  async searchNews() {\n    const requestUrl = `${this.baseUrl}/articlesearch.json?q=${this.query}&api-key=${this.apiKey}`;\n    return await axios.get(requestUrl).then(response => {\n      if (response.status !== 200 || response.data.response.docs.length === 0) {\n        throw new Error(response.status);\n      }\n\n      return response.data;\n    });\n  }\n}\n\n\n",null,"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n"],"names":["$bpxeT","parcelRequire","$737ecc87c3243e8a$export$3c2bf4ae9eb63dc1","default","$737ecc87c3243e8a$var$gallery","document","querySelector","$737ecc87c3243e8a$var$readData","$737ecc87c3243e8a$var$POPULAR_NEWS_URL","$737ecc87c3243e8a$var$getPopularNews","$737ecc87c3243e8a$var$_getPopularNews","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","data","$dIxxU","get","_ctx","sent","$737ecc87c3243e8a$var$_onReadMoreClick","e","uniqReadCardsArr","cardId","popularRes","date","currentDate","uniqPopReadCard1","target","nodeName","$1m3k3","getDataFromLocalStorage","closest","dataset","id","results","console","log","Date","toLocaleString","slice","find","param","Number","day","undefined","every","uniqPopReadCard","push","setDataToLocalStorage","addEventListener","$7a988f0374c947b6$export$2e2bcd8739ae039","SearchNewsApi","query","$hKHmD","page","key","requestUrl","concat","_this","baseUrl","apiKey","then","response","status","docs","length","Error","Object","defineProperty","module","exports","value","obj","enumerable","configurable","writable"],"version":3,"file":"read.8de655c4.js.map"}