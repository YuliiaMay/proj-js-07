{"mappings":"2sBAAA,IAAAA,EAAAC,EAAA,S,uCAGaC,EAAgB,YACvBC,EAAUC,SAASC,cAAc,kB,SAOxBC,I,OAAAA,EAAfC,EAAAP,EAAA,CAAAO,EAAAC,GAAAC,MAAA,SAAAC,EAA+BC,G,IAQvBC,EAEAC,EAEAC,EAEAC,EACAC,EAEAC,E,qEAhBoB,MAAtBN,EAAEO,OAAOC,SAAgB,C,gDAOvBP,GAAmB,EAAAQ,EAAAC,yBAAwBnB,GAE3CW,EAASF,EAAEO,OAAOI,QAAQ,SAASC,QAAQC,GAE3CV,GAAW,EAAAW,EAAAC,WAEXX,EAAO,IAAIY,KACXX,EAAcD,EAAKa,iBAAiBC,MAAM,EAAG,KAE7CZ,EAAeH,EAASgB,MAC5B,SAAAC,G,IAAGP,EAAEO,EAAFP,G,OAASQ,OAAOR,KAAQQ,OAAOnB,E,KAGlB,IAAIG,EAGpBJ,EAAiBqB,OACf,SAAAC,G,OAAgBF,OAAOnB,KAAYmB,OAAOE,EAAaV,G,MAGzDZ,EAAiBuB,KAAKlB,IACtB,EAAAG,EAAAgB,uBAAsBlC,EAAeU,GAEdR,SAASC,cAAc,uBAC/BgC,UAAUC,OAAO,oB,4CAhCrBhC,EAAeiC,MAAAC,KAAAC,U,CAJ1BtC,GACFA,EAAQuC,iBAAiB,S,SAGI/B,G,OAAhBL,EAAeiC,MAAAC,KAAAC,U","sources":["src/js/storage/add-to-read.js"],"sourcesContent":["import { getDataFromLocalStorage, setDataToLocalStorage } from '../api/service';\nimport { getCard } from '../gallery';\n\nexport const READ_NEWS_KEY = 'read-news';\nconst gallery = document.querySelector('.news__gallery');\n\n// перевірка чи клік у межах галереї статтей\nif (gallery) {\n  gallery.addEventListener('click', onReadMoreClick);\n}\n\nasync function onReadMoreClick(e) {\n  if (e.target.nodeName !== 'A') {\n    return;\n  }\n\n\n\n\n  const uniqReadCardsArr = getDataFromLocalStorage(READ_NEWS_KEY);\n\n  const cardId = e.target.closest('.card').dataset.id;\n\n  const readData = getCard();\n\n  const date = new Date();\n  const currentDate = date.toLocaleString().slice(0, 10);\n\n  const uniqReadCard = readData.find(\n    ({ id }) => String(id) === String(cardId)\n  );\n\n  uniqReadCard['day'] = currentDate;\n\n  if (\n    uniqReadCardsArr.every(\n      uniqReadCard => String(cardId) !== String(uniqReadCard.id)\n    )\n  ) {\n    uniqReadCardsArr.push(uniqReadCard);\n    setDataToLocalStorage(READ_NEWS_KEY, uniqReadCardsArr);\n\n    const tagAlreadyRead = document.querySelector('.read__already-read');\n    tagAlreadyRead.classList.remove('visually-hidden');\n    \n\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$737ecc87c3243e8a$export$3c2bf4ae9eb63dc1","$737ecc87c3243e8a$var$gallery","document","querySelector","$737ecc87c3243e8a$var$_onReadMoreClick","$parcel$interopDefault","$2TvXO","mark","_callee","e","uniqReadCardsArr","cardId","readData","date","currentDate","uniqReadCard1","target","nodeName","$1m3k3","getDataFromLocalStorage","closest","dataset","id","$8S4BJ","getCard","Date","toLocaleString","slice","find","param","String","every","uniqReadCard","push","setDataToLocalStorage","classList","remove","apply","this","arguments","addEventListener"],"version":3,"file":"read.0e1f9f97.js.map"}